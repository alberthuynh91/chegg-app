{"version":3,"sources":["components/Repository.js","utils.js","components/Repositories.js","components/Issue.js","components/Issues.js","components/images/spinner.gif","components/Spinner.js","components/ErrorMsg.js","components/Form.js","App.js","reportWebVitals.js","index.js"],"names":["Repository","props","formData","url","selectedRepo","setSelectedRepo","setIssues","apiKey","repo","split","length","getRepoName","owner","getOwnerName","className","onClick","payload","fetch","then","res","ok","json","Error","data","catch","error","console","handleClick","Repositories","repositories","undefined","map","item","id","Issue","d","issue","issues","index","title","user","created_at","updated_at","avatar_url","created","moment","format","updated","fromNow","formatUpdatedDate","src","alt","cpIssues","updatedIndex","splice","Issues","Spinner","spinner","width","ErrorMsg","message","toString","Form","setFormData","handleSubmit","handleClear","type","value","onChange","event","formKey","target","handleChange","initialFormData","defaultUserName","App","urlSearchParams","URLSearchParams","window","location","search","username","Object","fromEntries","entries","useState","setRepositories","setError","isFetching","setIsFetching","userName","setUserName","fetchRepos","handleInvalidInput","finally","localStorage","removeItem","useEffect","cachedState","getItem","state","JSON","parse","setItem","stringify","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.94cd3d5e.chunk.js","sourcesContent":["import React from 'react'\nimport { getRepoName, getOwnerName } from '../utils'\n\nconst Repository = (props) => {\n  const { formData, url, selectedRepo, setSelectedRepo, setIssues,  } = props\n  const { apiKey } = formData\n  const repo = getRepoName(url)\n  const owner = getOwnerName(url)\n  const isSelectedRepo = url === selectedRepo\n  const className = isSelectedRepo ? `repository-item selected` : `repository-item`\n  \n  const handleClick = (payload) => {\n    setSelectedRepo(url)\n    const { owner, repo } = payload\n    fetch(`/api/git/issues?repo=${repo}&owner=${owner}&apiKey=${apiKey}`)\n      .then((res) => {\n        if (res.ok) {\n          return res.json()\n        } else {\n          throw new Error('Not able to load issues for selected repository')\n        }\n      })\n      .then(({ data }) => {\n        setIssues(data)\n      })\n      .catch((error) => {\n        console.error(error)\n      })\n  }\n  \n  return (\n    <div \n      className={className}\n      onClick={() => { \n        handleClick({ owner, repo }) \n      }}\n    >\n        {repo}\n    </div>\n  )\n}\n\nexport default Repository","import moment from 'moment'\n\nexport const getRepoName = (url) => {\n  const split = url.split(\"/\")\n  return split[split.length - 1]\n}\n\nexport const getOwnerName = (url) => {\n  const split = url.split(\"/\")\n  return split[split.length - 2]\n}\n\nexport const formatCreatedDate = (d) => {\n  return moment(d).format('DD/MM/YYYY');\n}\n\nexport const formatUpdatedDate = (d) => {\n  return moment(d).fromNow();\n}\n\nexport const isValidAuthKey = (authKey) => {\n  return authKey !== \"\" && authKey !== undefined\n}","import React from 'react'\nimport Repository from './Repository'\n\nconst Repositories = (props) => {\n  const { formData, repositories, setIssues, selectedRepo, setSelectedRepo } = props\n  if (repositories === undefined) {\n    return null\n  }\n  return (\n    repositories?.length > 0 ? repositories?.map((item) => {\n      return (\n        <Repository\n          key={item.id}\n          {...item}\n          formData={formData}\n          setIssues={setIssues}\n          selectedRepo={selectedRepo}\n          setSelectedRepo={setSelectedRepo}\n        />\n      )\n    }) : <div>No repositories found</div>\n  )\n}\n\nexport default Repositories\n","import React from 'react'\nimport { formatCreatedDate, formatUpdatedDate } from '../utils'\n\nconst Issue = (props) => {\n  const { issue, issues, setIssues, index } = props\n  const { title, user, created_at, updated_at } = issue\n  const { avatar_url } = user\n  const created = formatCreatedDate(created_at)\n  const updated = formatUpdatedDate(updated_at)\n\n  const handleUp = () => {\n    const cpIssues = [...issues]\n    const updatedIndex = index === 0 ? index : index - 1 \n    cpIssues.splice(index, 1)\n    cpIssues.splice(updatedIndex, 0, issue)\n    setIssues(cpIssues)\n  }\n\n  const handleDown = () => {\n    const cpIssues = [...issues]\n    const updatedIndex = index === cpIssues.length - 1 ? index : index + 1\n    cpIssues.splice(index, 1)\n    cpIssues.splice(updatedIndex, 0, issue)\n    setIssues(cpIssues)\n  }\n\n  return (\n    <div className=\"issue-item\" onClick={() => {}}>\n      <div className=\"left\">\n        <div><img className=\"avatar\" src={avatar_url} alt=\"avatar\" /></div>\n        <div className=\"dates\">Created: {created}</div>\n        <div className=\"dates\">Last Updated: {updated}</div>\n      </div>\n      <div className=\"right\">\n        <span className=\"title\">{title}</span>\n        <span className=\"btn-container\">\n          <button onClick={handleUp}>▲</button>\n          <button onClick={handleDown}>▼</button>\n        </span>\n      </div>\n    </div>\n  )\n}\n\nexport default Issue","import React from 'react'\nimport Issue from './Issue'\n\nconst Issues = (props) => {\n  const { issues, setIssues } = props\n  if (!issues) {\n    return null\n  }\n  return (\n    issues.length > 0 ? \n    issues.map((issue, index) => {\n      const { id } = issue\n      return (\n        <Issue\n          className=\"issues-container\"\n          key={id}\n          index={index}\n          issue={issue}\n          issues={issues}\n          setIssues={setIssues}\n        />\n      )}) \n      : \n      <div>No issues found for this repository</div>\n  )\n}\n\nexport default Issues","export default __webpack_public_path__ + \"static/media/spinner.c7d9f081.gif\";","import React from 'react'\nimport spinner from './images/spinner.gif'\n\nconst Spinner = () => {\n  return (\n    <div className=\"spinner\">\n      <img src={spinner} width=\"100px\" alt=\"spinner icon\" />\n    </div>\n  )\n}\n\nexport default Spinner","import React from 'react'\n\nconst ErrorMsg = (props) => {\n  const { message } = props\n  return (\n    message ? <div className=\"error-msg\">{message.toString()}</div> : null\n    \n  )\n}\n\nexport default ErrorMsg","import React from 'react'\nimport ErrorMsg from './ErrorMsg'\n\nconst Form = (props) => {\n  const { error, formData, setFormData, handleSubmit = () => {}, handleClear = () => {} } = props\n  const { apiKey } = formData\n\n  const handleChange = (event, formKey) => {\n    setFormData({ ...formData, [formKey]: event.target.value })\n  }\n  \n  return (\n    <div className=\"form-container\">\n      <form>\n        <label>Enter Github API Key</label>\n        <div><input type=\"text\" value={apiKey} onChange={(event) => handleChange(event, 'apiKey')}></input></div>\n      </form>\n      <div>\n        <button onClick={handleSubmit}>Submit</button>\n        <button onClick={handleClear}>Clear</button>\n      </div>\n      <ErrorMsg message={error} />\n    </div>\n  )\n}\n\nexport default Form","import React, {useState, useEffect} from 'react'\nimport Repositories from './components/Repositories'\nimport Issues from './components/Issues'\nimport Spinner from './components/Spinner'\nimport Form from './components/Form'\nimport './App.css';\n\nconst initialFormData = {\n  apiKey: ''\n}\n\nconst defaultUserName = 'alberthuynh91'\n\nconst App = (props) => {\n  const urlSearchParams = new URLSearchParams(window.location.search);\n  const params = Object.fromEntries(urlSearchParams.entries());\n  const { username } = params\n  const [formData, setFormData] = useState(props.formData || initialFormData)\n  const [repositories, setRepositories] = useState(props.repositories)\n  const [selectedRepo, setSelectedRepo] = useState('')\n  const [issues, setIssues] = useState(props.issues || undefined)\n  const [error, setError] = useState(undefined)\n  const [isFetching, setIsFetching] = useState(false)\n  const [userName, setUserName] = useState(username || defaultUserName)\n  const fetchRepos = (apiKey) => {\n    if (apiKey !== '' && apiKey !== undefined) {\n      setIsFetching(true)\n      fetch(`/api/git?apiKey=${apiKey}&username=${userName}`)\n        .then((res) => {\n          if (res.ok) {\n            return res.json()\n          } else {\n            throw new Error('Oops! Try a different API key!')\n          }\n        })\n        .then(({ data }) => {\n          setError(undefined)\n          setRepositories(data)\n        })\n        .catch((error) => {\n          setError(error)\n          handleInvalidInput()\n        })\n        .finally(() => {\n          setIsFetching(false)\n        })\n    }\n  }\n\n  const handleSubmit = () => {\n    const { apiKey } = formData\n    fetchRepos(apiKey)\n  }\n\n  const handleInvalidInput = () => {\n    setRepositories(undefined)\n    setSelectedRepo({})\n    setIssues(undefined)\n    localStorage.removeItem('cachedState')\n  }\n\n  const handleClear = () => {\n    setFormData(initialFormData)\n    setRepositories(undefined)\n    setSelectedRepo({})\n    setIssues(undefined)\n    setError(undefined)\n    setIsFetching(false)\n    setUserName(defaultUserName)\n    localStorage.removeItem('cachedState')\n  }\n\n  useEffect(() => {\n    const cachedState = window.localStorage.getItem('cachedState')\n    if (cachedState !== 'undefined' && cachedState !== null) {\n      const state = JSON.parse(cachedState)\n      if (state.userName === userName) {\n        setFormData(state.formData)\n        setRepositories(state.repositories)\n        setSelectedRepo(state.selectedRepo)\n        setIssues(state.issues)\n        setUserName(state.userName)\n      }\n    }\n  }, []);\n\n  useEffect(() => {\n    const state = {\n      formData,\n      repositories,\n      selectedRepo,\n      issues,\n      userName\n    }\n    if (issues !== undefined) {\n      window.localStorage.setItem('cachedState', JSON.stringify(state));\n    }\n  }, [issues]);\n\n  useEffect(() => {\n    fetchRepos()\n  }, [])\n\n  return (\n    <div className=\"App\">\n      <Form\n        formData={formData}\n        setFormData={setFormData}\n        handleSubmit={handleSubmit}\n        handleClear={handleClear}\n        error={error}\n      />  \n      { isFetching ?\n          <Spinner />\n          : \n          <div className=\"content-container\">\n            <div className=\"content-row\">\n              <div className=\"content-left\">\n                <Repositories\n                  formData={formData}\n                  repositories={repositories}\n                  setIssues={setIssues}\n                  selectedRepo={selectedRepo}\n                  setSelectedRepo={setSelectedRepo}\n                />\n              </div>\n              <div className=\"content-right\">\n                <Issues issues={issues} setIssues={setIssues} />\n              </div>\n            </div>\n          </div>\n      }\n    </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}